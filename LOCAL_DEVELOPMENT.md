# Локальная разработка Merup

## Настройка для работы с локальным бекендом

### Что было изменено

1. **API клиент** (`frontend/src/api/client.ts`):
   - Автоматически определяет окружение разработки
   - В режиме разработки использует `http://localhost:8000/api`
   - В продакшене использует переменную окружения `VITE_API_BASE_URL` или fallback URL

2. **Конфигурация Vite** (`frontend/vite.config.ts`):
   - Настроен порт 5173 для фронтенда
   - Добавлена поддержка доступа с других устройств в локальной сети

3. **CORS настройки Django**:
   - Уже настроены для `http://localhost:5173`
   - Поддерживают все необходимые заголовки и методы

### Запуск локальной разработки

#### 1. Запуск бекенда

```bash
# Вариант 1: Использовать готовый скрипт
./start-backend.sh

# Вариант 2: Ручной запуск
cd backend
source ../venv/bin/activate
python manage.py runserver 0.0.0.0:8000
```

Бекенд будет доступен по адресу: http://localhost:8000

#### 2. Запуск фронтенда

```bash
cd frontend
npm run dev
# или
npm run dev:local
```

Фронтенд будет доступен по адресу: http://localhost:5173

### Переменные окружения

Для продакшена можно создать файл `.env` в папке `frontend` с переменной:

```
VITE_API_BASE_URL=https://your-production-api.com/api
```

### Проверка работы

1. Убедитесь, что бекенд запущен на порту 8000
2. Убедитесь, что фронтенд запущен на порту 5173
3. Откройте http://localhost:5173 в браузере
4. Проверьте Network tab в DevTools - запросы должны идти на `localhost:8000`

### Возможные проблемы

1. **CORS ошибки**: Убедитесь, что Django запущен с правильными CORS настройками
2. **Порт занят**: Измените порт в `vite.config.ts` или `manage.py runserver`
3. **Бекенд не отвечает**: Проверьте, что Django сервер запущен и доступен по http://localhost:8000
