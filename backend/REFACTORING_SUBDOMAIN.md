# –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ—Å–ª–µ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (–≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–æ—Ä–º–∞—Ç `/api/eventums/{slug}/...`), —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ –±—ã–ª–∞ —É–ø—Ä–æ—â–µ–Ω–∞ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### 1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è eventum

**–†–∞–Ω—å—à–µ:**
1. Middleware (–ø–æ–¥–¥–æ–º–µ–Ω—ã) - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±
2. URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã - fallback

**–¢–µ–ø–µ—Ä—å:**
1. URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`eventum_slug`) - **–æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±**
2. Middleware (–ø–æ–¥–¥–æ–º–µ–Ω—ã) - fallback –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### 2. –£–ø—Ä–æ—â–µ–Ω–∏–µ SubdomainMiddleware

**–†–∞–Ω—å—à–µ:**
- –î–µ–ª–∞–ª –∑–∞–ø—Ä–æ—Å –∫ –ë–î –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è eventum
- –°–æ—Ö—Ä–∞–Ω—è–ª –æ–±—ä–µ–∫—Ç `eventum` –≤ `request.eventum`
- –í—ã–±—Ä–∞—Å—ã–≤–∞–ª 404 –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö eventum'–æ–≤
- –ú–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–¢–µ–ø–µ—Ä—å:**
- –¢–æ–ª—å–∫–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç slug –∏–∑ –ø–æ–¥–¥–æ–º–µ–Ω–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ `request.eventum_slug`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è eventum –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ `get_eventum_from_request`
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 3. –£–ø—Ä–æ—â–µ–Ω–∏–µ URL —Ä–æ—É—Ç–∏–Ω–≥–∞

**–†–∞–Ω—å—à–µ:**
```python
# –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
path('eventums/<slug:eventum_slug>/', include(eventum_scoped_router.urls)),  # –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω
path('', include(eventum_scoped_router.urls)),  # –ü–æ–¥–¥–æ–º–µ–Ω—ã
path('', include(router.urls)),  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ eventum –Ω–∞ –ø–æ–¥–¥–æ–º–µ–Ω–∞—Ö
```

**–¢–µ–ø–µ—Ä—å:**
```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (—Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ)
path('eventums/<slug:eventum_slug>/', include(eventum_scoped_router.urls)),

# Fallback –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
path('', include(eventum_scoped_router.urls)),
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ get_eventum_from_request

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏–∑–º–µ–Ω–µ–Ω:**
1. **URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (`eventum_slug`, `slug`) - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±
2. **Middleware** (`request.eventum_slug`) - fallback

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –£–±—Ä–∞–Ω –∑–∞–ø—Ä–æ—Å –∫ –ë–î –≤ middleware –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ eventum —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ
- –ú–µ–Ω—å—à–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è = –º–µ–Ω—å—à–µ I/O

### üîß –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –ï–¥–∏–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è eventum —á–µ—Ä–µ–∑ URL
- –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ü—Ä–æ—â–µ –æ—Ç–ª–∞–¥–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üìù –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞
- –£–±—Ä–∞–Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ URL —Ä–æ—É—Ç–∏–Ω–≥–µ
- –£–ø—Ä–æ—â–µ–Ω middleware
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã**:

- ‚úÖ –ü–æ–¥–¥–æ–º–µ–Ω—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –°—Ç–∞—Ä—ã–µ URL –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ API –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Å –ø–æ–¥–¥–æ–º–µ–Ω–∞–º–∏, –∏ –±–µ–∑ –Ω–∏—Ö

## –ú–∏–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤:

1. **–£–¥–∞–ª–∏—Ç—å SubdomainMiddleware** –∏–∑ `settings.py`
2. **–£–±—Ä–∞—Ç—å fallback –º–∞—Ä—à—Ä—É—Ç—ã** –∏–∑ `urls.py`
3. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å get_eventum_from_request** (—É–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É middleware)
4. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å EventumViewSet.get_object**

–ù–æ —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ - —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞ –∏ –Ω–µ –º–µ—à–∞–µ—Ç.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:

1. **–° –ø–æ–¥–¥–æ–º–µ–Ω–∞–º–∏**: `https://pldets.merup.ru/admin/events`
2. **–ë–µ–∑ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤**: `https://merup.ru/pldets/admin/events`
3. **API –∑–∞–ø—Ä–æ—Å—ã**: –≤—Å–µ –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –∫ `/api/eventums/pldets/...`

–í—Å–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ —Ö–æ—Ä–æ—à–æ.
